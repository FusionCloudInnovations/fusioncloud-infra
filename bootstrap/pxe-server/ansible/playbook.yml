---
- name: Setup PXE Boot Server
  hosts: localhost
  become: false

  tasks:
    - name: Ensure folder structure exists
      file:
        path: "{{ item }}"
        state: directory
      loop:
        - "./http"
        - "./tftp/pxelinux.cfg"
    - name: Start PXE services using modern Docker Compose (CLI v2)
      ansible.builtin.command:
        cmd: docker compose up -d
      args:
        chdir: "{{ playbook_dir }}/compose"
